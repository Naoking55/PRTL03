
Adobe Premiere Legacy Title (.prtl) ファイル仕様

Premiere Pro 2021 以前のレガシータイトルは Inscriber Title Designer
の技術に基づいており、タイトルの内容を .prtl という拡張子の XML
ファイルで表現しています。提供された
3 つのサンプルファイルを解析したところ、どれも共通した構造を持っており、表示するテロップだけでなく、フォント・スタイル・色・背景などの情報も包含していました。本章ではその構造と主要な要素を解説します。例示としてはサンプルファイルの片鱗を引用しますが、値はファイルにより異なります。

全体構造

最上位要素は <Adobe_Root>
で、内部にタイトルのバージョンやモーション設定を含む <Adobe_Title>
と、レイアウトやスタイルを含む <InscriberLayouts> の
2 つの主要な子要素があります。以下はファイル先頭部の例ですfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF,Layout%3E%3CLayoutEffectInfo%20Ve。

    <?xml version="1.0" encoding="UTF-16" ?>
    <Adobe_Root>
      <Adobe_Title>…</Adobe_Title>
      <InscriberLayouts Version="1.0">…</InscriberLayouts>
    </Adobe_Root>

Adobe_Title にはタイトル全体のバージョン（20080702
等）とモーション設定が格納されています。InscriberLayouts は複数の
<Layout>
を包含し、レイアウトごとにタイトル内容・スタイル・背景などの情報を記述します。サンプルではいずれも単一の
<Layout> でした。

Adobe_Title 部分

Adobe_Title には <Version> と <Motion_Settings>
が含まれ、モーション（再生開始位置やポストロールなど）を制御します。モーション設定は
7 つの単純なフラグ/数値要素で構成されており、デフォルトでは以下のように設定されていましたfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF,Motion_Set。

  要素              説明                           サンプル値
  ----------------- ------------------------------ ------------
  Play_Forward      前方に再生するかどうか         true
  Start_on_Screen   スタート時に画面上にあるか     false
  Pre_Roll          再生前の待ち時間（フレーム）   0
  Ease_In           フェードイン時間               0
  End_off_Screen    終了時に画面外に出るか         false
  Post_Roll         終了後の待ち時間（フレーム）   0
  Ease_Out          フェードアウト時間             0

Layout 部分

InscriberLayouts 内の <Layout>
要素は実際のタイトルデータを持ちます。主に次の下位要素があります。

LayoutEffectInfo

-   EffectType – エフェクト種類。サンプルでは 0 でエフェクト無し。
-   Indic / Ligatures / HindiDigits –
    インド系言語向けの連結文字や数字の扱いを制御するブール値。

LayoutDimension

画面サイズや成長方向を定義します。pXPIXELS と pYLINES
はレイアウトの基準解像度（横 1920 × 縦 1080 など）を表し、pSCREENAR
はアスペクト比、growthDirection
はテキストチェーンの拡張方向を示しますfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=res%3E%3CHindiDigits%3Efalse%3C%2FHindiDigits%3E%3C%2FLayoutEffectInfo%3E%3CLayoutDimension%20Version%3D%20。

LayoutAttributes

安全領域（テロップが収まるべき範囲）を指定するエリア情報です。SafeTitleArea
と SafeActionArea があり、それぞれ左・上・右・下の相対値 (0.0–1.0)
で定義されますfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=。

Background

背景の描画に使用するシェーダー (塗りパターン)
を参照する要素です。ShaderReference には後述の <Shaders> 内の ID
が入り、On
で背景の有無を切り替えますfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=right%3E%3Cbottom%3E0.95%3C%2Fbottom%3E%3C%2FSafeActionArea%3E%3C%2FLayoutAttributes%3E%3CBackground%20Versi%20on%3D。paintingRange
は「normalLayout」など描画範囲の名前です。

DefaultStyle と DefaultTextDescription

それぞれ <Styles> と <TextDescriptions> 内のオブジェクトを参照するための
Reference フィールドです。指定された ID
のスタイル／テキスト説明がレイアウト全体の既定値として適用されますfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=lLayout。

GraphicObjectDefaults

線分・図形描画のデフォルト設定。endCapType（線端の形状）、joinTypeClosed・joinTypeOpen（角の形状）、lineWidth、miterLimit
などが含まれますfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=ription%3E,5。また、丸角や切り落とし角の半径を
8 個の値として持ちますfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=ription%3E,5。

TextChainDefaults

テキストチェーン（テキストボックス）の種別ごとの既定設定をまとめた要素です。normal、boxNormal、blockNormal、spline
の 4 つのプロファイルがあり、それぞれについて行間 (leading)、折り返し
(wordWrap)、テキストボックスのサイズ固定
(lockedLinesX/lockedLinesY)、位置合わせ (Alignment)
などが指定されますfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=leading%3E0,TextDe。

TextDescriptions（フォント仕様）

複数の <TextDescription> が格納され、各要素は Reference
属性で識別されます。内部の <TypeSpec>
にはテキストに適用するフォント・サイズなどが格納されます。主なフィールドは以下のとおりですfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=scriptions%20Version%3D,%E3%81%8F%E3%82%8D%E3%81%8B%E3%81%AD%20Std%3C%2FfifontFamilyName%3E%3CfifontStyle%3EEB%3C%20%2FfifontStyle%3E%3CfifontType%3E6%3C%2FfifontType%3E%3Cficategory%3E1%3C%2Fficategory%3E%3C%2FTypeSpec%3E%3C%2FTe。

  -------------------------------------------------------------------------------------------------------------------------
  フィールド         役割                                                                   例file:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=scriptions%20Version%3D,%E3%81%8F%E3%82%8D%E3%81%8B%E3%81%AD%20Std%3C%2FfifontFamilyName%3E%3CfifontStyle%3EEB%3C%20%2FfifontStyle%3E%3CfifontType%3E6%3C%2FfifontType%3E%3Cficategory%3E1%3C%2Fficategory%3E%3C%2FTypeSpec%3E%3C%2FTe
  ------------------ ---------------------------------------------------------------------- -------------------------------
  size               オブジェクトのサイズを示す内部単位。単純に高さと同じ値のことが多い。   616

  txHeight           フォントのポイントサイズ（高さ）。                                     75 または 116

  txKern             カーニング量。                                                         0

  baselineShift      ベースラインシフト。                                                   0

  leading            行間。                                                                 0

  txSCaps /          スモールキャップス（小型大文字）の高さと有効化フラグ。                 75 / false
  txSCapsOn                                                                                 

  txSlant            斜体角度。                                                             0

  txUnderline        下線の有無。                                                           false

  txWidth            文字幅の相対倍率 (100 が等幅)。                                        67.5 や 104.4

  fiBold / fiItalic  太字／斜体属性 (0=false, 1=true)。                                     0

  fifullName         フォントファイル名。                                                   KurokaneStd-EB

  fifontFamilyName   フォントファミリー名。                                                 FOT-くろかね Std

  fifontStyle        フォントスタイル。                                                     EB、Ultra など

  fifontType         フォントタイプを数値で表す (5=CID FontType1、6=OpenType など)。        5 または 6

  ficategory         カテゴリを表す 32 bit フラグ。                                         1 や 536870913
  -------------------------------------------------------------------------------------------------------------------------

これらの TextDescription は後述の CharacterAttributes
で参照され、文字列ごとに異なるフォントを割り当てることができます。

Styles（スタイル定義）

<Styles> は複数の <Style> 要素からなり、各スタイルは ID
属性で識別されます。スタイルは文字や図形の塗り・線の描画方法をまとめたもので、以下の要素から構成されます。

StyleBase

スタイル全体の基本設定です。type フィールドは 50000
でテキスト用のスタイルを示します。positionDominance、lineGradient、styleRef（参照する
TextDescription）、shadow_softness、personality
などの属性が含まれますfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=pe%3E%3Cficategory%3E1%3C%2Fficategory%3E%3C%2FTypeSpec%3E%3C%2FTextDescription%3E%3C%2FTextDescriptions%3E%3CSt%20yles%3E%3CStyle%20ID%3D,0%3C%2FfaceDistortX%3E%3CfaceDistortY%3E0%3C%2FfaceDistortY%3E%3Cshadow_softness%3E30%3C%2Fshadow_softne%20ss%3E%3Cpersonality%3E0%3C%2Fpersonality%3E%3Clinked%3Efalse%3C%2Flinked%3E%3CEmbellishmentSizeRule%3Efals%20e%3C%2FEmbellishmentSizeRule%3E%3CPainterRampType%3EBasic%3C%2FPainterRampType%3E%3C%2FStyleBase%3E%3CFr。EmbellishmentSizeRule
や PainterRampType
は装飾のサイズ規則やグラデーションのタイプを決定します。

FragmentList

1 つの <Style> は複数の <Fragment>
から構成されます。各フラグメントはテキストの顔、アウトライン、シャドウ等の「層」を定義します。主なフィールドは以下の通りですfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=agmentList%20Version%3D,13%2013%2013%2013%2013。

-   size –
    フラグメントの大きさ。特にアウトラインやシャドウの場合は線幅やぼかし量を示し、例えばサンプル 3
    では数値の違いが“ストローク30–150”の差になっていました。
-   offset – 描画をずらすピクセル量。シャドウの場合は offset が 0
    以外になります。
-   angle – 回転角度やシャドウの方向を度数で示します。
-   ghost – true の場合は対象を不可視にするフラグ。
-   isExtendedShadowFragment – シャドウが外側に拡張されるかどうか。
-   eFragmentType – フラグメントの種類を表す数値
    (2=塗り／線、0=シャドウなど)。
-   fragmentOff – フラグメントの描画を無効化するフラグ。
-   annotation – フラグメントの種類の識別子。4 は塗り、3
    は一次アウトライン、2 は二次アウトライン、1 は影を表し、65537・65538
    は 3D 押し出し部分に使われますfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=agmentList%20Version%3D,ShaderRef。
-   painterMix – 16 個の整数値（0–15）からなる配列で、後述の ShaderList
    におけるペインタ（シェーダー）番号をミックスするために用いられます。

ShaderList

フラグメントが実際にどのシェーダー（塗りやグラデーション）を使うかを設定する一覧です。PainterNumber
に対応するシェーダー ID (shaderRef) が設定されます。例えば
PainterNumber="10" が塗り (fill)、11 がアウトライン、12 と 13
がシャドウやグラデーションなどを指すことが多いfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=%3C%2FpainterMix%3E%3C%2FFragment%3E%3C%2FFragmentList%3E%3CShaderList%20Version%3D,shaderRef%3E4111%3C%2FshaderRef%3E%3C%2FShaderRef%3E%3CShaderRef。負の値や
1000 以上の番号は立体効果など特殊な目的で予約されています。

Shaders（シェーダー）

<Shaders> 要素は複数の <Shader>
定義を含みます。各シェーダーは塗りやグラデーションの色・テクスチャを指定します。主なフィールドは以下の通りです（省略しているフィールドも多数存在します）。

  -------------------------------------------------------------------------
  フィールド           説明
  -------------------- ----------------------------------------------------
  cReference           既存のシェーダーを参照する ID。

  textureRef           使用するテクスチャ ID。

  colorOption          単色・グラデーションなどのモード指定。

  shaderOn             シェーダーを有効にするか。

  glintSize /          ハイライト（グリント）の大きさと位置。
  glintOffset          

  rampPosTop /         グラデーションの開始位置と終了位置。
  rampPosBottom        

  rampAngle            グラデーションの角度。

  bevelBalance         ベベル効果のバランス。

  rampCycle            グラデーションの繰り返し回数。

  classicStyle /       レガシースタイルやグラデーションの種類。
  rampType             

  ColorSpec            シェーダーごとに複数存在し、red・green・blue・xpar
                       (透過度)
                       で色を定義するfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=%3Efalse,angle。開始色
                       (cStartColor) と終了色 (cEndColor)
                       を対で持ち、グラデーションや光彩色を決定します。
  -------------------------------------------------------------------------

サンプルファイルでは
50 個前後のシェーダーが含まれており、単色塗り・グラデーション・エッジカラー・ベベルカラー等が定義されていました。

Textures（テクスチャ）

<Textures> はタイル状の画像やパターンを貼り込む際に使われます。各
<Texture> (Version 7) は以下の属性を持ちます。

-   textureRef と textureNameRef –
    テクスチャの識別子および名称。外部画像にリンクする場合はファイル名が入ります。
-   compositeRule / invertComposite –
    テクスチャの合成規則や反転を制御します。
-   autoReflect / autoRotate – 繰り返し時の反転・自動回転。
-   scaleXRule / scaleYRule と scaleX / scaleY –
    拡大縮小のルールと倍率。
-   tileX / tileY – テクスチャの繰り返し有無をブール値で指定します。
-   alignXRule / alignYRule と textureXDelta / textureYDelta –
    テクスチャの配置や微調整。
-   textureMix, alphaScale, textureAlphavsKey, rampAlphavsKey –
    シェーダーへの混合割合やアルファチャンネルの扱い。
-   classicTint, textureOn – レガシースタイルや有効フラグ。
-   pixelAspect – ピクセルアスペクト比。

サンプルでは約
40 種類のテクスチャが含まれていましたが、多くはデフォルト値のままで実際には使用されていませんでした。

Layers

レイアウト内には 1 つ以上の <Layer>
が存在し、各レイヤーには図形やテキストを配置します。Layer 内部には
<DrawPage> と <TextPage> があり、順序は描画順序を意味します。MergeGroups
は複数オブジェクトをグループ化してレイヤー内での透明処理や不透明度を制御しますfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=groupID%3D,fileSt。

DrawPage（図形）

DrawPage は任意個の <DrawObject>
要素を持ち、図形や線を配置します。主な子要素は次の通りです。

  ---------------------------------------------------------------------------------------
  要素                     説明
  ------------------------ --------------------------------------------------------------
  BaseID                   オブジェクトの ID と、参照するスタイル ID (styleRef)
                           を含みます。

  GraphicSpec              描画プリミティブを表す数値 (gPrimitive)
                           を指定します。1=四角形、2=円、6=角丸四角形、16=線分など。

  GraphicGeometry          位置・サイズ・回転・スキュー・角丸半径をまとめます。gCrsrX/Y
                           がオブジェクトの左上座標、gSizeX/Y
                           が幅と高さですfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=Version%3D,%2F%3E%3CSkew%3E%3Chorizontal%3E%200%3C%2Fhorizontal%3E%3Cvertical%3E0%3C%2Fvertical%3E%3C%2FSkew%3E%3CgAttribute%3E0%3C%2FgAttribute%3E%3CgCrsrX%3E190%20.962%3C%2FgCrsrX%3E%3CgCrsrY%3E267.923%3C%2FgCrsrY%3E%3CgSizeX%3E627.854%3C%2FgSizeX%3E%3CgSizeY%3E229.462%3C%2FgS%20izeY%3E%3C%2FGraphicGeometry%3E%3CtagName%3E%3Cname。

  LineParameters           線幅や角の形状 (end caps, join types) を指定します。

  PolyPoints               線やカーブの制御点のリストです。各 ControlPoint に
                           cp（座標）と forward/backward 方向ベクトル、continuity
                           が含まれます。

  tagName                  オブジェクトに任意のラベルを付けるための要素。
  ---------------------------------------------------------------------------------------

DrawObject が使われていない場合もあり、タイトルがテキストのみなら
<DrawPage> は空になります。

TextPage（テキスト）

TextPage はタイトルに含まれるテキスト内容を保持します。複数の
<TextChain>
を持ち、各チェーンはテキストボックスやパス上のテキストを表します。ChainProperty
には文字揃えやボックスサイズがありfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=、TextLine
要素に実際の文字列が格納されます。

TextLine

各 TextLine には以下の情報があります。

-   BaseProperties – テキストベースラインの位置 (txBase), X 座標 (XPos),
    角度 (angle), 縦書きか (verticalText), 行送り (objectLeading)
    などfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=Tabs%3E%3CTextLine%20Version%3D,0。
-   SplineData – 曲線上のテキストに使用されるデータで、開始位置
    (crsrX/crsrY), サイズ (sizeX/sizeY), PolyPoints
    に制御点を持ちますfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=ext%3E%3CobjectLeading%3E0%3C%2FobjectLeading%3E%3C%2FBaseProperties%3E%3CSplineData%20Version%3D,370.536%22%20y%3D%22168.231%22%20%2F%3E%3Ccontinuity%3E1%3C%2Fcontinuity%3E%3C%2FControlPoint%3E%3C%2FPolyPoints%3E%3C%2FSplineData。通常のテキストでは存在しません。
-   EnclosingObjectType – “block” (矩形ボックス) または “spline” (曲線)
    など。
-   Alignment – 左揃え (left)、中央揃え (center)、右揃え (right)。
-   RTL – 右から左へ書く言語の場合に true になります。
-   TRString –
    実際に表示される文字列file:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=jectType%3Eblock,3。サンプル 1
    には「OCHA NORMA 広本瑠璃＆筒井澪心」「天上天下唯我独尊」「例文１」「例文２」「第すく」などが含まれていました。
-   RunLengthEncodedCharacterAttributes –
    文字ごとのスタイルを指定するリストです。それぞれの
    <CharacterAttributes>
    は以下の属性を持ちますfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=%3E%3CCharacterAttributes%20RunCount%3D,0。
    -   RunCount – 何文字分この属性が続くか。
    -   StyleRef – 適用するスタイル ID（<Styles> で定義）。
    -   TextRef – 使用するフォント説明の ID（<TextDescriptions>
        で定義）。
    -   TXKerning / TXPostKerning – 前後のカーニング量。
    -   BaselineShifting – ベースラインの上下シフト量。

RunLengthEncodedCharacterAttributes により、1
行の中で異なるフォントや塗り・線を細かく指定できます。例えばサンプル 1
の 1 行目では、11 文字にスタイル 4097 を、次の 3 文字にスタイル 4096
を適用する等の記述がされていますfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=%3E%3CCharacterAttributes%20RunCount%3D,0。

MergeGroups

MergeGroups
は複数のオブジェクトをグループ化してブレンディング順を定義します。各
Group には groupID と ObjectID があり、punchThru や opacity
で乗算や穴あけを指定できますfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=groupID%3D,fileSt。

VLS（FileReference）

<VLS> は将来的なバージョン管理やリンク設定用の領域です。サンプルでは
<FileReference> の seClass が 2、seCode が 1000 となっており、fileString
は空でしたfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=%2F%3E%3C%2FGroup%3E%3C%2FMergeGroups%3E%3C%2FLayer%3E%3C%2FLayers%3E%3CVLS%3E%3CFileReference%20Version%3D。Premiere Pro
内部のリンク先などを指定する場合に使われます。

その他の観察事項

-   文字列のエンコーディング：ヘッダーには encoding="UTF‑16"
    とありますが、サンプルファイルは UTF‑8
    で保存されていました。解析時には実際のエンコーディングに注意する必要があります。
-   単一行 XML：ファイル全体が改行を含まない 1 行の XML
    として保存されていました。そのため人間が読みやすい形にするにはテキストエディタで整形するか、XML
    パーサーを利用します。
-   Style と Fragment の対応：複数の Fragment
    を持つスタイルでは、annotation がフラグメントの役割
    (塗り、1 次アウトライン、2 次アウトライン、影など) を表し、size と
    offset で線幅や影の距離を指定します。例えばサンプル 3 では
    10 種類のスタイルがあり、Fragment の size
    値の違いによって「ストローク30」「ストローク40」といった線幅違いのタイトルが実現されていました。
-   垂直テキスト：verticalText を true
    にすると縦書きになります。サンプル 1 の 5 行目「第すく」は
    verticalText が true であり、TRString
    には縦書き用の文字列が格納されていましたfile:///home/oai/share/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB_01.prtl#:~:text=Line%20Version%3D,4104。

まとめ

Premiere Pro のレガシータイトル (*.prtl) は XML
ベースであり、タイトルの構造やスタイルを詳細に定義します。上記で説明した要素はあくまで主要な部分であり、実際には数多くのパラメータが存在します。タイトルをプログラムから生成・解析する場合は次のポイントを押さえると良いでしょう。

1.  トップレベルの階層を理解し、Adobe_Title と InscriberLayouts
    を分けて扱う。
2.  TextDescriptions と Styles の参照関係を押さえ、StyleRef と TextRef
    を経由して文字列ごとにフォントと描画方法を適用する。
3.  FragmentList と
    ShaderListによりアウトラインや影を重ねていることを理解し、annotation
    の種類と painterMix の対応を把握する。
4.  LayoutDimension・ChainPropertyなどにより座標系や文字の配置が決まるため、外部から数値を変更する際は解像度と連携させる。

この仕様書は提供されたサンプルファイルを基にしたものであり、他のバージョンや環境では要素数や属性が追加・変更されている可能性があります。しかし概念的な構造はほぼ共通のため、レガシータイトルの解析・生成の指針として役立ちます。

追加サンプルから判明した拡張点

後半に提供されたサンプル 4〜10 は、従来のテロップに対して異なる加工やエフェクトを加えたものでした。これらを解析したところ、以下のような拡張点が確認できました。

パス上のテキスト（SplineData）

サンプル 4 では <TextLine> の EnclosingObjectType が spline
になっており、曲線に沿って文字列を配置していました。テキストボックスの代わりに
<SplineData> が挿入され、テキストのスタート位置 (crsrX/crsrY) とサイズ
(sizeX/sizeY) のほか、複数の <ControlPoint> を含む PolyPoints
が記録されます。各 ControlPoint には cp 属性に座標が、forward や
backward
にベジェ曲線の制御ベクトルが含まれており、これにより自由な曲線パスが構成されます。EnclosingObjectType
が spline の行は、通常の矩形枠 (block) と同じ <BaseProperties>
を共有しますが、行送りや揃えは無効になる点に注意が必要です。

グラデーション塗り

サンプル 5 には線形グラデーションを持つタイトルが含まれていました。基本的なシェーダー構造は前述の通りですが、グラデーションの場合は
Shader 内の rampAngle（角度）や
rampPosTop／rampPosBottom（開始位置・終了位置）、rampCycle（繰り返し回数）を用いて色の遷移を制御します。グラデーションの色指定は
ColorSpec 内の cStartColor と cEndColor
のペアで与えられます。シェーダーが二層以上重なる場合は painterMix と
classicStyle でどの塗りが優先されるかを指定します。

多重ストロークと複数フラグメント

サンプル 6 では、1 つのスタイルに 7 個の <Fragment>
が含まれていました。これは塗り・一次アウトライン・二次アウトライン・影などを複数重ねた状態を表します。FragmentList
は上から順番に処理され、size と offset
によってアウトラインの太さや影の距離が決まります。各 Fragment の
annotation 属性はサンプルによっては省略されており、代わりに painterMix
や AnnotationSpec
によって役割（塗りかアウトラインか）が決定される場合もあります。したがって解析時にはフラグメントの順序と
size の値から層の意味を推定する必要があります。

複数スタイルの同一テキスト

サンプル 7 では 2 つの <Style>
要素が存在し、同一の文字列「縦書き」に対して別々のスタイルが適用されていました。TextLine
の RunLengthEncodedCharacterAttributes で文字ごとに異なる StyleRef
を指定することで、1 行の中で複数のスタイルを切り替えることができます。この仕組みにより、例えば見出しの一部だけ太字や別の色にするといった装飾が可能です。また、このサンプルでは従来ファイルに見られた
verticalText="true" 属性は付いていませんでしたが、BaseProperties に
verticalText 属性を追加することで縦書き指定ができます。

テキスト無しのレイアウト

サンプル 8 には <TextPage> が存在せず、代わりに <DrawPage>
で図形のみが描画されていました。このようなタイトルは背景素材や装飾用に利用され、DrawObject
の GraphicSpec が矩形や円を指定します。テキストが無い場合でも <Styles>
や <Shaders>、<Textures>
は存在し、図形の塗りや線幅を定義するのに使われます。

太線と影の組み合わせ

サンプル 9 は文字列「太線＋影」に対して太いアウトラインとドロップシャドウを組み合わせた例でした。スタイルは
4 つのフラグメントで構成され、それぞれ塗り、太い線、細い線、影に相当します。複数のフラグメントを適用することで複雑なアウトラインや装飾を実現できることが改めて確認されました。

角度付きテキスト

サンプル 10 はタイトルを斜めに配置した例で、BaseProperties の angle
属性が設定されていました。angle
は度数で指定され、正の値は反時計回りに回転します。レガシータイトルではテキストボックス全体を回転させるため、背景やアウトラインを含めたすべてが同時に回転します。角度指定は省略可能で、既定値は
0（水平）です。

これらの追加サンプルから、レガシータイトルは非常に柔軟なレイアウト・装飾機能を持っていることが分かります。新しい効果を解析する際は、TextLine
の EnclosingObjectType、Style 内の Fragment 数、Shader の ramp*
プロパティ、BaseProperties の angle や verticalText
などに注目すると良いでしょう。
